package co.zhanglintc.weather;

import android.graphics.Bitmap;
import android.os.Bundle;
import android.os.Looper;
import android.support.v7.app.AppCompatActivity;
import android.util.Log;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.ImageView;
import android.widget.TextView;

import org.json.JSONException;

import java.io.InputStream;
import java.util.HashMap;
import java.util.Map;

import co.zhanglintc.weather.common.PullXMLTools;
import co.zhanglintc.weather.common.WeatherUtils;

public class MainActivity extends AppCompatActivity {

    Bitmap bmImg;

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        String temp_C = null;
        String status = null;
        new Thread(urlRun).start();

        httpHandler http = new httpHandler();
        TextView todayTemp = (TextView) super.findViewById(R.id.todayTemp);
        TextView todayStatus = (TextView) super.findViewById(R.id.todayStatus);
        ImageView imView = (ImageView) super.findViewById(R.id.imview);
        todayTemp.setText("Updating weather data...");
        todayStatus.setText("");
        myThread t = new myThread(http, todayTemp, todayStatus, imView);
        t.start();

    }

    // test data below
    String rawJsonData = "{ \"data\": { \"current_condition\": [ {\"cloudcover\": \"0\", \"FeelsLikeC\": \"16\", \"FeelsLikeF\": \"61\", \"humidity\": \"68\",  \"lang_zh\": [ {\"value\": \"晴朗\" } ], \"observation_time\": \"02:40 PM\", \"precipMM\": \"0.0\", \"pressure\": \"1020\", \"temp_C\": \"16\", \"temp_F\": \"61\", \"visibility\": \"10\", \"weatherCode\": \"113\",  \"weatherDesc\": [ {\"value\": \"Clear\" } ],  \"weatherIconUrl\": [ {\"value\": \"http:\\/\\/cdn.worldweatheronline.net\\/images\\/wsymbols01_png_64\\/wsymbol_0008_clear_sky_night.png\" } ], \"winddir16Point\": \"N\", \"winddirDegree\": \"360\", \"windspeedKmph\": \"19\", \"windspeedMiles\": \"12\" } ],  \"request\": [ {\"query\": \"Chongqing, China\", \"type\": \"City\" } ],  \"weather\": [ { \"astronomy\": [ {\"moonrise\": \"11:36 PM\", \"moonset\": \"12:27 PM\", \"sunrise\": \"07:07 AM\", \"sunset\": \"06:07 PM\" } ], \"date\": \"2015-11-02\",  \"hourly\": [ {\"chanceoffog\": \"0\", \"chanceoffrost\": \"0\", \"chanceofhightemp\": \"0\", \"chanceofovercast\": \"0\", \"chanceofrain\": \"0\", \"chanceofremdry\": \"0\", \"chanceofsnow\": \"0\", \"chanceofsunshine\": \"98\", \"chanceofthunder\": \"0\", \"chanceofwindy\": \"0\", \"cloudcover\": \"9\", \"DewPointC\": \"10\", \"DewPointF\": \"51\", \"FeelsLikeC\": \"16\", \"FeelsLikeF\": \"60\", \"HeatIndexC\": \"16\", \"HeatIndexF\": \"60\", \"humidity\": \"71\",  \"lang_zh\": [ {\"value\": \"晴朗\" } ], \"precipMM\": \"0.0\", \"pressure\": \"1025\", \"tempC\": \"16\", \"tempF\": \"60\", \"time\": \"200\", \"visibility\": \"10\", \"weatherCode\": \"113\",  \"weatherDesc\": [ {\"value\": \"Clear\" } ],  \"weatherIconUrl\": [ {\"value\": \"http:\\/\\/cdn.worldweatheronline.net\\/images\\/wsymbols01_png_64\\/wsymbol_0008_clear_sky_night.png\" } ], \"WindChillC\": \"16\", \"WindChillF\": \"60\", \"winddir16Point\": \"ENE\", \"winddirDegree\": \"66\", \"WindGustKmph\": \"7\", \"WindGustMiles\": \"4\", \"windspeedKmph\": \"4\", \"windspeedMiles\": \"3\" }, {\"chanceoffog\": \"0\", \"chanceoffrost\": \"0\", \"chanceofhightemp\": \"0\", \"chanceofovercast\": \"0\", \"chanceofrain\": \"0\", \"chanceofremdry\": \"0\", \"chanceofsnow\": \"0\", \"chanceofsunshine\": \"99\", \"chanceofthunder\": \"0\", \"chanceofwindy\": \"0\", \"cloudcover\": \"10\", \"DewPointC\": \"9\", \"DewPointF\": \"49\", \"FeelsLikeC\": \"15\", \"FeelsLikeF\": \"58\", \"HeatIndexC\": \"14\", \"HeatIndexF\": \"58\", \"humidity\": \"72\",  \"lang_zh\": [ {\"value\": \"晴朗\" } ], \"precipMM\": \"0.0\", \"pressure\": \"1023\", \"tempC\": \"14\", \"tempF\": \"58\", \"time\": \"500\", \"visibility\": \"10\", \"weatherCode\": \"113\",  \"weatherDesc\": [ {\"value\": \"Clear\" } ],  \"weatherIconUrl\": [ {\"value\": \"http:\\/\\/cdn.worldweatheronline.net\\/images\\/wsymbols01_png_64\\/wsymbol_0008_clear_sky_night.png\" } ], \"WindChillC\": \"15\", \"WindChillF\": \"58\", \"winddir16Point\": \"ENE\", \"winddirDegree\": \"62\", \"WindGustKmph\": \"9\", \"WindGustMiles\": \"5\", \"windspeedKmph\": \"5\", \"windspeedMiles\": \"3\" }, {\"chanceoffog\": \"0\", \"chanceoffrost\": \"0\", \"chanceofhightemp\": \"0\", \"chanceofovercast\": \"0\", \"chanceofrain\": \"0\", \"chanceofremdry\": \"0\", \"chanceofsnow\": \"0\", \"chanceofsunshine\": \"98\", \"chanceofthunder\": \"0\", \"chanceofwindy\": \"0\", \"cloudcover\": \"15\", \"DewPointC\": \"10\", \"DewPointF\": \"50\", \"FeelsLikeC\": \"16\", \"FeelsLikeF\": \"60\", \"HeatIndexC\": \"16\", \"HeatIndexF\": \"60\", \"humidity\": \"70\",  \"lang_zh\": [ {\"value\": \"晴天\" } ], \"precipMM\": \"0.0\", \"pressure\": \"1023\", \"tempC\": \"16\", \"tempF\": \"60\", \"time\": \"800\", \"visibility\": \"10\", \"weatherCode\": \"113\",  \"weatherDesc\": [ {\"value\": \"Sunny\" } ],  \"weatherIconUrl\": [ {\"value\": \"http:\\/\\/cdn.worldweatheronline.net\\/images\\/wsymbols01_png_64\\/wsymbol_0001_sunny.png\" } ], \"WindChillC\": \"16\", \"WindChillF\": \"60\", \"winddir16Point\": \"ENE\", \"winddirDegree\": \"61\", \"WindGustKmph\": \"7\", \"WindGustMiles\": \"4\", \"windspeedKmph\": \"5\", \"windspeedMiles\": \"3\" }, {\"chanceoffog\": \"0\", \"chanceoffrost\": \"0\", \"chanceofhightemp\": \"0\", \"chanceofovercast\": \"0\", \"chanceofrain\": \"0\", \"chanceofremdry\": \"0\", \"chanceofsnow\": \"0\", \"chanceofsunshine\": \"97\", \"chanceofthunder\": \"0\", \"chanceofwindy\": \"0\", \"cloudcover\": \"18\", \"DewPointC\": \"11\", \"DewPointF\": \"52\", \"FeelsLikeC\": \"20\", \"FeelsLikeF\": \"69\", \"HeatIndexC\": \"20\", \"HeatIndexF\": \"69\", \"humidity\": \"54\",  \"lang_zh\": [ {\"value\": \"晴天\" } ], \"precipMM\": \"0.0\", \"pressure\": \"1024\", \"tempC\": \"20\", \"tempF\": \"69\", \"time\": \"1100\", \"visibility\": \"10\", \"weatherCode\": \"113\",  \"weatherDesc\": [ {\"value\": \"Sunny\" } ],  \"weatherIconUrl\": [ {\"value\": \"http:\\/\\/cdn.worldweatheronline.net\\/images\\/wsymbols01_png_64\\/wsymbol_0001_sunny.png\" } ], \"WindChillC\": \"20\", \"WindChillF\": \"69\", \"winddir16Point\": \"ENE\", \"winddirDegree\": \"65\", \"WindGustKmph\": \"7\", \"WindGustMiles\": \"4\", \"windspeedKmph\": \"6\", \"windspeedMiles\": \"4\" }, {\"chanceoffog\": \"0\", \"chanceoffrost\": \"0\", \"chanceofhightemp\": \"10\", \"chanceofovercast\": \"0\", \"chanceofrain\": \"0\", \"chanceofremdry\": \"0\", \"chanceofsnow\": \"0\", \"chanceofsunshine\": \"96\", \"chanceofthunder\": \"0\", \"chanceofwindy\": \"0\", \"cloudcover\": \"13\", \"DewPointC\": \"12\", \"DewPointF\": \"53\", \"FeelsLikeC\": \"25\", \"FeelsLikeF\": \"77\", \"HeatIndexC\": \"25\", \"HeatIndexF\": \"77\", \"humidity\": \"47\",  \"lang_zh\": [ {\"value\": \"晴天\" } ], \"precipMM\": \"0.0\", \"pressure\": \"1020\", \"tempC\": \"24\", \"tempF\": \"74\", \"time\": \"1400\", \"visibility\": \"10\", \"weatherCode\": \"113\",  \"weatherDesc\": [ {\"value\": \"Sunny\" } ],  \"weatherIconUrl\": [ {\"value\": \"http:\\/\\/cdn.worldweatheronline.net\\/images\\/wsymbols01_png_64\\/wsymbol_0001_sunny.png\" } ], \"WindChillC\": \"24\", \"WindChillF\": \"74\", \"winddir16Point\": \"ENE\", \"winddirDegree\": \"65\", \"WindGustKmph\": \"9\", \"WindGustMiles\": \"6\", \"windspeedKmph\": \"8\", \"windspeedMiles\": \"5\" }, {\"chanceoffog\": \"0\", \"chanceoffrost\": \"0\", \"chanceofhightemp\": \"10\", \"chanceofovercast\": \"0\", \"chanceofrain\": \"0\", \"chanceofremdry\": \"0\", \"chanceofsnow\": \"0\", \"chanceofsunshine\": \"94\", \"chanceofthunder\": \"0\", \"chanceofwindy\": \"0\", \"cloudcover\": \"18\", \"DewPointC\": \"11\", \"DewPointF\": \"52\", \"FeelsLikeC\": \"25\", \"FeelsLikeF\": \"77\", \"HeatIndexC\": \"25\", \"HeatIndexF\": \"77\", \"humidity\": \"46\",  \"lang_zh\": [ {\"value\": \"晴天\" } ], \"precipMM\": \"0.0\", \"pressure\": \"1017\", \"tempC\": \"23\", \"tempF\": \"74\", \"time\": \"1700\", \"visibility\": \"10\", \"weatherCode\": \"113\",  \"weatherDesc\": [ {\"value\": \"Sunny\" } ],  \"weatherIconUrl\": [ {\"value\": \"http:\\/\\/cdn.worldweatheronline.net\\/images\\/wsymbols01_png_64\\/wsymbol_0001_sunny.png\" } ], \"WindChillC\": \"23\", \"WindChillF\": \"74\", \"winddir16Point\": \"NE\", \"winddirDegree\": \"47\", \"WindGustKmph\": \"14\", \"WindGustMiles\": \"9\", \"windspeedKmph\": \"12\", \"windspeedMiles\": \"7\" }, {\"chanceoffog\": \"0\", \"chanceoffrost\": \"0\", \"chanceofhightemp\": \"0\", \"chanceofovercast\": \"0\", \"chanceofrain\": \"0\", \"chanceofremdry\": \"0\", \"chanceofsnow\": \"0\", \"chanceofsunshine\": \"98\", \"chanceofthunder\": \"0\", \"chanceofwindy\": \"0\", \"cloudcover\": \"28\", \"DewPointC\": \"13\", \"DewPointF\": \"56\", \"FeelsLikeC\": \"20\", \"FeelsLikeF\": \"69\", \"HeatIndexC\": \"20\", \"HeatIndexF\": \"69\", \"humidity\": \"64\",  \"lang_zh\": [ {\"value\": \"局部多云\" } ], \"precipMM\": \"0.0\", \"pressure\": \"1018\", \"tempC\": \"20\", \"tempF\": \"69\", \"time\": \"2000\", \"visibility\": \"10\", \"weatherCode\": \"116\",  \"weatherDesc\": [ {\"value\": \"Partly Cloudy\" } ],  \"weatherIconUrl\": [ {\"value\": \"http:\\/\\/cdn.worldweatheronline.net\\/images\\/wsymbols01_png_64\\/wsymbol_0004_black_low_cloud.png\" } ], \"WindChillC\": \"20\", \"WindChillF\": \"69\", \"winddir16Point\": \"NE\", \"winddirDegree\": \"38\", \"WindGustKmph\": \"15\", \"WindGustMiles\": \"9\", \"windspeedKmph\": \"13\", \"windspeedMiles\": \"8\" }, {\"chanceoffog\": \"0\", \"chanceoffrost\": \"0\", \"chanceofhightemp\": \"0\", \"chanceofovercast\": \"0\", \"chanceofrain\": \"0\", \"chanceofremdry\": \"0\", \"chanceofsnow\": \"0\", \"chanceofsunshine\": \"0\", \"chanceofthunder\": \"0\", \"chanceofwindy\": \"0\", \"cloudcover\": \"84\", \"DewPointC\": \"13\", \"DewPointF\": \"56\", \"FeelsLikeC\": \"19\", \"FeelsLikeF\": \"67\", \"HeatIndexC\": \"19\", \"HeatIndexF\": \"67\", \"humidity\": \"68\",  \"lang_zh\": [ {\"value\": \"多云\" } ], \"precipMM\": \"0.0\", \"pressure\": \"1019\", \"tempC\": \"19\", \"tempF\": \"67\", \"time\": \"2300\", \"visibility\": \"10\", \"weatherCode\": \"119\",  \"weatherDesc\": [ {\"value\": \"Cloudy\" } ],  \"weatherIconUrl\": [ {\"value\": \"http:\\/\\/cdn.worldweatheronline.net\\/images\\/wsymbols01_png_64\\/wsymbol_0004_black_low_cloud.png\" } ], \"WindChillC\": \"19\", \"WindChillF\": \"67\", \"winddir16Point\": \"ENE\", \"winddirDegree\": \"59\", \"WindGustKmph\": \"9\", \"WindGustMiles\": \"5\", \"windspeedKmph\": \"8\", \"windspeedMiles\": \"5\" } ], \"maxtempC\": \"24\", \"maxtempF\": \"74\", \"mintempC\": \"18\", \"mintempF\": \"64\", \"uvIndex\": \"5\" }, { \"astronomy\": [ {\"moonrise\": \"No moonrise\", \"moonset\": \"01:12 PM\", \"sunrise\": \"07:08 AM\", \"sunset\": \"06:06 PM\" } ], \"date\": \"2015-11-03\",  \"hourly\": [ {\"chanceoffog\": \"0\", \"chanceoffrost\": \"0\", \"chanceofhightemp\": \"0\", \"chanceofovercast\": \"0\", \"chanceofrain\": \"0\", \"chanceofremdry\": \"0\", \"chanceofsnow\": \"0\", \"chanceofsunshine\": \"0\", \"chanceofthunder\": \"0\", \"chanceofwindy\": \"0\", \"cloudcover\": \"76\", \"DewPointC\": \"12\", \"DewPointF\": \"53\", \"FeelsLikeC\": \"18\", \"FeelsLikeF\": \"64\", \"HeatIndexC\": \"18\", \"HeatIndexF\": \"64\", \"humidity\": \"66\",  \"lang_zh\": [ {\"value\": \"多云\" } ], \"precipMM\": \"0.0\", \"pressure\": \"1018\", \"tempC\": \"18\", \"tempF\": \"64\", \"time\": \"200\", \"visibility\": \"10\", \"weatherCode\": \"119\",  \"weatherDesc\": [ {\"value\": \"Cloudy\" } ],  \"weatherIconUrl\": [ {\"value\": \"http:\\/\\/cdn.worldweatheronline.net\\/images\\/wsymbols01_png_64\\/wsymbol_0004_black_low_cloud.png\" } ], \"WindChillC\": \"18\", \"WindChillF\": \"64\", \"winddir16Point\": \"E\", \"winddirDegree\": \"80\", \"WindGustKmph\": \"6\", \"WindGustMiles\": \"4\", \"windspeedKmph\": \"5\", \"windspeedMiles\": \"3\" }, {\"chanceoffog\": \"0\", \"chanceoffrost\": \"0\", \"chanceofhightemp\": \"0\", \"chanceofovercast\": \"3\", \"chanceofrain\": \"0\", \"chanceofremdry\": \"0\", \"chanceofsnow\": \"0\", \"chanceofsunshine\": \"0\", \"chanceofthunder\": \"0\", \"chanceofwindy\": \"0\", \"cloudcover\": \"73\", \"DewPointC\": \"11\", \"DewPointF\": \"51\", \"FeelsLikeC\": \"18\", \"FeelsLikeF\": \"64\", \"HeatIndexC\": \"18\", \"HeatIndexF\": \"64\", \"humidity\": \"64\",  \"lang_zh\": [ {\"value\": \"多云\" } ], \"precipMM\": \"0.0\", \"pressure\": \"1017\", \"tempC\": \"18\", \"tempF\": \"64\", \"time\": \"500\", \"visibility\": \"10\", \"weatherCode\": \"119\",  \"weatherDesc\": [ {\"value\": \"Cloudy\" } ],  \"weatherIconUrl\": [ {\"value\": \"http:\\/\\/cdn.worldweatheronline.net\\/images\\/wsymbols01_png_64\\/wsymbol_0004_black_low_cloud.png\" } ], \"WindChillC\": \"18\", \"WindChillF\": \"64\", \"winddir16Point\": \"ESE\", \"winddirDegree\": \"108\", \"WindGustKmph\": \"5\", \"WindGustMiles\": \"3\", \"windspeedKmph\": \"4\", \"windspeedMiles\": \"2\" }, {\"chanceoffog\": \"0\", \"chanceoffrost\": \"0\", \"chanceofhightemp\": \"0\", \"chanceofovercast\": \"0\", \"chanceofrain\": \"0\", \"chanceofremdry\": \"0\", \"chanceofsnow\": \"0\", \"chanceofsunshine\": \"100\", \"chanceofthunder\": \"0\", \"chanceofwindy\": \"0\", \"cloudcover\": \"46\", \"DewPointC\": \"12\", \"DewPointF\": \"54\", \"FeelsLikeC\": \"19\", \"FeelsLikeF\": \"67\", \"HeatIndexC\": \"19\", \"HeatIndexF\": \"67\", \"humidity\": \"62\",  \"lang_zh\": [ {\"value\": \"局部多云\" } ], \"precipMM\": \"0.0\", \"pressure\": \"1018\", \"tempC\": \"19\", \"tempF\": \"67\", \"time\": \"800\", \"visibility\": \"10\", \"weatherCode\": \"116\",  \"weatherDesc\": [ {\"value\": \"Partly Cloudy\" } ],  \"weatherIconUrl\": [ {\"value\": \"http:\\/\\/cdn.worldweatheronline.net\\/images\\/wsymbols01_png_64\\/wsymbol_0002_sunny_intervals.png\" } ], \"WindChillC\": \"19\", \"WindChillF\": \"67\", \"winddir16Point\": \"E\", \"winddirDegree\": \"98\", \"WindGustKmph\": \"4\", \"WindGustMiles\": \"2\", \"windspeedKmph\": \"4\", \"windspeedMiles\": \"2\" }, {\"chanceoffog\": \"0\", \"chanceoffrost\": \"0\", \"chanceofhightemp\": \"0\", \"chanceofovercast\": \"0\", \"chanceofrain\": \"0\", \"chanceofremdry\": \"0\", \"chanceofsnow\": \"0\", \"chanceofsunshine\": \"0\", \"chanceofthunder\": \"0\", \"chanceofwindy\": \"0\", \"cloudcover\": \"65\", \"DewPointC\": \"9\", \"DewPointF\": \"49\", \"FeelsLikeC\": \"20\", \"FeelsLikeF\": \"69\", \"HeatIndexC\": \"20\", \"HeatIndexF\": \"69\", \"humidity\": \"49\",  \"lang_zh\": [ {\"value\": \"多云\" } ], \"precipMM\": \"0.0\", \"pressure\": \"1020\", \"tempC\": \"20\", \"tempF\": \"69\", \"time\": \"1100\", \"visibility\": \"10\", \"weatherCode\": \"119\",  \"weatherDesc\": [ {\"value\": \"Cloudy\" } ],  \"weatherIconUrl\": [ {\"value\": \"http:\\/\\/cdn.worldweatheronline.net\\/images\\/wsymbols01_png_64\\/wsymbol_0003_white_cloud.png\" } ], \"WindChillC\": \"20\", \"WindChillF\": \"69\", \"winddir16Point\": \"E\", \"winddirDegree\": \"90\", \"WindGustKmph\": \"6\", \"WindGustMiles\": \"4\", \"windspeedKmph\": \"5\", \"windspeedMiles\": \"3\" }, {\"chanceoffog\": \"0\", \"chanceoffrost\": \"0\", \"chanceofhightemp\": \"0\", \"chanceofovercast\": \"0\", \"chanceofrain\": \"0\", \"chanceofremdry\": \"0\", \"chanceofsnow\": \"0\", \"chanceofsunshine\": \"0\", \"chanceofthunder\": \"0\", \"chanceofwindy\": \"0\", \"cloudcover\": \"94\", \"DewPointC\": \"10\", \"DewPointF\": \"50\", \"FeelsLikeC\": \"21\", \"FeelsLikeF\": \"69\", \"HeatIndexC\": \"21\", \"HeatIndexF\": \"69\", \"humidity\": \"51\",  \"lang_zh\": [ {\"value\": \"阴天\" } ], \"precipMM\": \"0.0\", \"pressure\": \"1018\", \"tempC\": \"21\", \"tempF\": \"69\", \"time\": \"1400\", \"visibility\": \"10\", \"weatherCode\": \"122\",  \"weatherDesc\": [ {\"value\": \"Overcast\" } ],  \"weatherIconUrl\": [ {\"value\": \"http:\\/\\/cdn.worldweatheronline.net\\/images\\/wsymbols01_png_64\\/wsymbol_0004_black_low_cloud.png\" } ], \"WindChillC\": \"21\", \"WindChillF\": \"69\", \"winddir16Point\": \"NE\", \"winddirDegree\": \"52\", \"WindGustKmph\": \"13\", \"WindGustMiles\": \"8\", \"windspeedKmph\": \"11\", \"windspeedMiles\": \"7\" }, {\"chanceoffog\": \"0\", \"chanceoffrost\": \"0\", \"chanceofhightemp\": \"0\", \"chanceofovercast\": \"0\", \"chanceofrain\": \"0\", \"chanceofremdry\": \"0\", \"chanceofsnow\": \"0\", \"chanceofsunshine\": \"0\", \"chanceofthunder\": \"0\", \"chanceofwindy\": \"0\", \"cloudcover\": \"95\", \"DewPointC\": \"11\", \"DewPointF\": \"52\", \"FeelsLikeC\": \"20\", \"FeelsLikeF\": \"68\", \"HeatIndexC\": \"20\", \"HeatIndexF\": \"68\", \"humidity\": \"57\",  \"lang_zh\": [ {\"value\": \"阴天\" } ], \"precipMM\": \"0.0\", \"pressure\": \"1017\", \"tempC\": \"20\", \"tempF\": \"68\", \"time\": \"1700\", \"visibility\": \"10\", \"weatherCode\": \"122\",  \"weatherDesc\": [ {\"value\": \"Overcast\" } ],  \"weatherIconUrl\": [ {\"value\": \"http:\\/\\/cdn.worldweatheronline.net\\/images\\/wsymbols01_png_64\\/wsymbol_0004_black_low_cloud.png\" } ], \"WindChillC\": \"20\", \"WindChillF\": \"68\", \"winddir16Point\": \"NE\", \"winddirDegree\": \"38\", \"WindGustKmph\": \"14\", \"WindGustMiles\": \"9\", \"windspeedKmph\": \"12\", \"windspeedMiles\": \"8\" }, {\"chanceoffog\": \"0\", \"chanceoffrost\": \"0\", \"chanceofhightemp\": \"0\", \"chanceofovercast\": \"90\", \"chanceofrain\": \"0\", \"chanceofremdry\": \"0\", \"chanceofsnow\": \"0\", \"chanceofsunshine\": \"0\", \"chanceofthunder\": \"0\", \"chanceofwindy\": \"0\", \"cloudcover\": \"99\", \"DewPointC\": \"11\", \"DewPointF\": \"52\", \"FeelsLikeC\": \"19\", \"FeelsLikeF\": \"65\", \"HeatIndexC\": \"19\", \"HeatIndexF\": \"65\", \"humidity\": \"61\",  \"lang_zh\": [ {\"value\": \"阴天\" } ], \"precipMM\": \"0.0\", \"pressure\": \"1019\", \"tempC\": \"19\", \"tempF\": \"65\", \"time\": \"2000\", \"visibility\": \"10\", \"weatherCode\": \"122\",  \"weatherDesc\": [ {\"value\": \"Overcast\" } ],  \"weatherIconUrl\": [ {\"value\": \"http:\\/\\/cdn.worldweatheronline.net\\/images\\/wsymbols01_png_64\\/wsymbol_0004_black_low_cloud.png\" } ], \"WindChillC\": \"19\", \"WindChillF\": \"65\", \"winddir16Point\": \"NE\", \"winddirDegree\": \"45\", \"WindGustKmph\": \"12\", \"WindGustMiles\": \"8\", \"windspeedKmph\": \"9\", \"windspeedMiles\": \"6\" }, {\"chanceoffog\": \"0\", \"chanceoffrost\": \"0\", \"chanceofhightemp\": \"0\", \"chanceofovercast\": \"81\", \"chanceofrain\": \"0\", \"chanceofremdry\": \"0\", \"chanceofsnow\": \"0\", \"chanceofsunshine\": \"0\", \"chanceofthunder\": \"0\", \"chanceofwindy\": \"0\", \"cloudcover\": \"100\", \"DewPointC\": \"11\", \"DewPointF\": \"53\", \"FeelsLikeC\": \"18\", \"FeelsLikeF\": \"65\", \"HeatIndexC\": \"18\", \"HeatIndexF\": \"65\", \"humidity\": \"64\",  \"lang_zh\": [ {\"value\": \"阴天\" } ], \"precipMM\": \"0.0\", \"pressure\": \"1020\", \"tempC\": \"18\", \"tempF\": \"65\", \"time\": \"2300\", \"visibility\": \"10\", \"weatherCode\": \"122\",  \"weatherDesc\": [ {\"value\": \"Overcast\" } ],  \"weatherIconUrl\": [ {\"value\": \"http:\\/\\/cdn.worldweatheronline.net\\/images\\/wsymbols01_png_64\\/wsymbol_0004_black_low_cloud.png\" } ], \"WindChillC\": \"18\", \"WindChillF\": \"65\", \"winddir16Point\": \"NNE\", \"winddirDegree\": \"32\", \"WindGustKmph\": \"8\", \"WindGustMiles\": \"5\", \"windspeedKmph\": \"5\", \"windspeedMiles\": \"3\" } ], \"maxtempC\": \"21\", \"maxtempF\": \"69\", \"mintempC\": \"16\", \"mintempF\": \"61\", \"uvIndex\": \"3\" }, { \"astronomy\": [ {\"moonrise\": \"12:30 AM\", \"moonset\": \"01:52 PM\", \"sunrise\": \"07:09 AM\", \"sunset\": \"06:05 PM\" } ], \"date\": \"2015-11-04\",  \"hourly\": [ {\"chanceoffog\": \"0\", \"chanceoffrost\": \"0\", \"chanceofhightemp\": \"0\", \"chanceofovercast\": \"0\", \"chanceofrain\": \"0\", \"chanceofremdry\": \"0\", \"chanceofsnow\": \"0\", \"chanceofsunshine\": \"0\", \"chanceofthunder\": \"0\", \"chanceofwindy\": \"0\", \"cloudcover\": \"53\", \"DewPointC\": \"11\", \"DewPointF\": \"52\", \"FeelsLikeC\": \"17\", \"FeelsLikeF\": \"62\", \"HeatIndexC\": \"17\", \"HeatIndexF\": \"62\", \"humidity\": \"68\",  \"lang_zh\": [ {\"value\": \"局部多云\" } ], \"precipMM\": \"0.0\", \"pressure\": \"1020\", \"tempC\": \"17\", \"tempF\": \"62\", \"time\": \"200\", \"visibility\": \"10\", \"weatherCode\": \"116\",  \"weatherDesc\": [ {\"value\": \"Partly Cloudy\" } ],  \"weatherIconUrl\": [ {\"value\": \"http:\\/\\/cdn.worldweatheronline.net\\/images\\/wsymbols01_png_64\\/wsymbol_0004_black_low_cloud.png\" } ], \"WindChillC\": \"17\", \"WindChillF\": \"62\", \"winddir16Point\": \"NE\", \"winddirDegree\": \"41\", \"WindGustKmph\": \"12\", \"WindGustMiles\": \"7\", \"windspeedKmph\": \"7\", \"windspeedMiles\": \"4\" }, {\"chanceoffog\": \"0\", \"chanceoffrost\": \"0\", \"chanceofhightemp\": \"0\", \"chanceofovercast\": \"0\", \"chanceofrain\": \"0\", \"chanceofremdry\": \"0\", \"chanceofsnow\": \"0\", \"chanceofsunshine\": \"0\", \"chanceofthunder\": \"0\", \"chanceofwindy\": \"0\", \"cloudcover\": \"50\", \"DewPointC\": \"12\", \"DewPointF\": \"53\", \"FeelsLikeC\": \"16\", \"FeelsLikeF\": \"61\", \"HeatIndexC\": \"16\", \"HeatIndexF\": \"61\", \"humidity\": \"74\",  \"lang_zh\": [ {\"value\": \"局部多云\" } ], \"precipMM\": \"0.0\", \"pressure\": \"1018\", \"tempC\": \"16\", \"tempF\": \"61\", \"time\": \"500\", \"visibility\": \"10\", \"weatherCode\": \"116\",  \"weatherDesc\": [ {\"value\": \"Partly Cloudy\" } ],  \"weatherIconUrl\": [ {\"value\": \"http:\\/\\/cdn.worldweatheronline.net\\/images\\/wsymbols01_png_64\\/wsymbol_0004_black_low_cloud.png\" } ], \"WindChillC\": \"16\", \"WindChillF\": \"61\", \"winddir16Point\": \"ENE\", \"winddirDegree\": \"74\", \"WindGustKmph\": \"6\", \"WindGustMiles\": \"4\", \"windspeedKmph\": \"4\", \"windspeedMiles\": \"2\" }, {\"chanceoffog\": \"0\", \"chanceoffrost\": \"0\", \"chanceofhightemp\": \"0\", \"chanceofovercast\": \"0\", \"chanceofrain\": \"0\", \"chanceofremdry\": \"0\", \"chanceofsnow\": \"0\", \"chanceofsunshine\": \"100\", \"chanceofthunder\": \"0\", \"chanceofwindy\": \"0\", \"cloudcover\": \"43\", \"DewPointC\": \"13\", \"DewPointF\": \"56\", \"FeelsLikeC\": \"19\", \"FeelsLikeF\": \"66\", \"HeatIndexC\": \"19\", \"HeatIndexF\": \"66\", \"humidity\": \"70\",  \"lang_zh\": [ {\"value\": \"局部多云\" } ], \"precipMM\": \"0.0\", \"pressure\": \"1019\", \"tempC\": \"19\", \"tempF\": \"66\", \"time\": \"800\", \"visibility\": \"10\", \"weatherCode\": \"116\",  \"weatherDesc\": [ {\"value\": \"Partly Cloudy\" } ],  \"weatherIconUrl\": [ {\"value\": \"http:\\/\\/cdn.worldweatheronline.net\\/images\\/wsymbols01_png_64\\/wsymbol_0002_sunny_intervals.png\" } ], \"WindChillC\": \"19\", \"WindChillF\": \"66\", \"winddir16Point\": \"ENE\", \"winddirDegree\": \"68\", \"WindGustKmph\": \"4\", \"WindGustMiles\": \"2\", \"windspeedKmph\": \"3\", \"windspeedMiles\": \"2\" }, {\"chanceoffog\": \"0\", \"chanceoffrost\": \"0\", \"chanceofhightemp\": \"0\", \"chanceofovercast\": \"0\", \"chanceofrain\": \"3\", \"chanceofremdry\": \"0\", \"chanceofsnow\": \"0\", \"chanceofsunshine\": \"0\", \"chanceofthunder\": \"0\", \"chanceofwindy\": \"0\", \"cloudcover\": \"100\", \"DewPointC\": \"12\", \"DewPointF\": \"54\", \"FeelsLikeC\": \"19\", \"FeelsLikeF\": \"67\", \"HeatIndexC\": \"19\", \"HeatIndexF\": \"67\", \"humidity\": \"63\",  \"lang_zh\": [ {\"value\": \"阴天\" } ], \"precipMM\": \"0.0\", \"pressure\": \"1019\", \"tempC\": \"19\", \"tempF\": \"67\", \"time\": \"1100\", \"visibility\": \"10\", \"weatherCode\": \"122\",  \"weatherDesc\": [ {\"value\": \"Overcast\" } ],  \"weatherIconUrl\": [ {\"value\": \"http:\\/\\/cdn.worldweatheronline.net\\/images\\/wsymbols01_png_64\\/wsymbol_0004_black_low_cloud.png\" } ], \"WindChillC\": \"19\", \"WindChillF\": \"67\", \"winddir16Point\": \"ENE\", \"winddirDegree\": \"66\", \"WindGustKmph\": \"5\", \"WindGustMiles\": \"3\", \"windspeedKmph\": \"4\", \"windspeedMiles\": \"3\" }, {\"chanceoffog\": \"0\", \"chanceoffrost\": \"0\", \"chanceofhightemp\": \"0\", \"chanceofovercast\": \"0\", \"chanceofrain\": \"0\", \"chanceofremdry\": \"0\", \"chanceofsnow\": \"0\", \"chanceofsunshine\": \"0\", \"chanceofthunder\": \"0\", \"chanceofwindy\": \"0\", \"cloudcover\": \"100\", \"DewPointC\": \"13\", \"DewPointF\": \"56\", \"FeelsLikeC\": \"21\", \"FeelsLikeF\": \"70\", \"HeatIndexC\": \"21\", \"HeatIndexF\": \"70\", \"humidity\": \"61\",  \"lang_zh\": [ {\"value\": \"阴天\" } ], \"precipMM\": \"0.0\", \"pressure\": \"1016\", \"tempC\": \"21\", \"tempF\": \"70\", \"time\": \"1400\", \"visibility\": \"10\", \"weatherCode\": \"122\",  \"weatherDesc\": [ {\"value\": \"Overcast\" } ],  \"weatherIconUrl\": [ {\"value\": \"http:\\/\\/cdn.worldweatheronline.net\\/images\\/wsymbols01_png_64\\/wsymbol_0004_black_low_cloud.png\" } ], \"WindChillC\": \"21\", \"WindChillF\": \"70\", \"winddir16Point\": \"ENE\", \"winddirDegree\": \"62\", \"WindGustKmph\": \"9\", \"WindGustMiles\": \"6\", \"windspeedKmph\": \"8\", \"windspeedMiles\": \"5\" }, {\"chanceoffog\": \"0\", \"chanceoffrost\": \"0\", \"chanceofhightemp\": \"0\", \"chanceofovercast\": \"0\", \"chanceofrain\": \"0\", \"chanceofremdry\": \"0\", \"chanceofsnow\": \"0\", \"chanceofsunshine\": \"100\", \"chanceofthunder\": \"0\", \"chanceofwindy\": \"0\", \"cloudcover\": \"40\", \"DewPointC\": \"14\", \"DewPointF\": \"56\", \"FeelsLikeC\": \"21\", \"FeelsLikeF\": \"69\", \"HeatIndexC\": \"21\", \"HeatIndexF\": \"69\", \"humidity\": \"64\",  \"lang_zh\": [ {\"value\": \"局部多云\" } ], \"precipMM\": \"0.0\", \"pressure\": \"1014\", \"tempC\": \"21\", \"tempF\": \"69\", \"time\": \"1700\", \"visibility\": \"10\", \"weatherCode\": \"116\",  \"weatherDesc\": [ {\"value\": \"Partly Cloudy\" } ],  \"weatherIconUrl\": [ {\"value\": \"http:\\/\\/cdn.worldweatheronline.net\\/images\\/wsymbols01_png_64\\/wsymbol_0002_sunny_intervals.png\" } ], \"WindChillC\": \"21\", \"WindChillF\": \"69\", \"winddir16Point\": \"NE\", \"winddirDegree\": \"50\", \"WindGustKmph\": \"14\", \"WindGustMiles\": \"9\", \"windspeedKmph\": \"12\", \"windspeedMiles\": \"8\" }, {\"chanceoffog\": \"0\", \"chanceoffrost\": \"0\", \"chanceofhightemp\": \"0\", \"chanceofovercast\": \"0\", \"chanceofrain\": \"81\", \"chanceofremdry\": \"0\", \"chanceofsnow\": \"0\", \"chanceofsunshine\": \"0\", \"chanceofthunder\": \"0\", \"chanceofwindy\": \"0\", \"cloudcover\": \"73\", \"DewPointC\": \"14\", \"DewPointF\": \"57\", \"FeelsLikeC\": \"18\", \"FeelsLikeF\": \"65\", \"HeatIndexC\": \"18\", \"HeatIndexF\": \"65\", \"humidity\": \"74\",  \"lang_zh\": [ {\"value\": \"小阵雨\" } ], \"precipMM\": \"0.3\", \"pressure\": \"1016\", \"tempC\": \"18\", \"tempF\": \"65\", \"time\": \"2000\", \"visibility\": \"10\", \"weatherCode\": \"353\",  \"weatherDesc\": [ {\"value\": \"Light rain shower\" } ],  \"weatherIconUrl\": [ {\"value\": \"http:\\/\\/cdn.worldweatheronline.net\\/images\\/wsymbols01_png_64\\/wsymbol_0025_light_rain_showers_night.png\" } ], \"WindChillC\": \"18\", \"WindChillF\": \"65\", \"winddir16Point\": \"NE\", \"winddirDegree\": \"40\", \"WindGustKmph\": \"14\", \"WindGustMiles\": \"9\", \"windspeedKmph\": \"10\", \"windspeedMiles\": \"6\" }, {\"chanceoffog\": \"0\", \"chanceoffrost\": \"0\", \"chanceofhightemp\": \"0\", \"chanceofovercast\": \"0\", \"chanceofrain\": \"80\", \"chanceofremdry\": \"0\", \"chanceofsnow\": \"0\", \"chanceofsunshine\": \"0\", \"chanceofthunder\": \"0\", \"chanceofwindy\": \"0\", \"cloudcover\": \"68\", \"DewPointC\": \"14\", \"DewPointF\": \"58\", \"FeelsLikeC\": \"18\", \"FeelsLikeF\": \"64\", \"HeatIndexC\": \"18\", \"HeatIndexF\": \"64\", \"humidity\": \"82\",  \"lang_zh\": [ {\"value\": \"中雨或大阵雨\" } ], \"precipMM\": \"3.3\", \"pressure\": \"1016\", \"tempC\": \"18\", \"tempF\": \"64\", \"time\": \"2300\", \"visibility\": \"7\", \"weatherCode\": \"356\",  \"weatherDesc\": [ {\"value\": \"Moderate or heavy rain shower\" } ],  \"weatherIconUrl\": [ {\"value\": \"http:\\/\\/cdn.worldweatheronline.net\\/images\\/wsymbols01_png_64\\/wsymbol_0026_heavy_rain_showers_night.png\" } ], \"WindChillC\": \"18\", \"WindChillF\": \"64\", \"winddir16Point\": \"N\", \"winddirDegree\": \"10\", \"WindGustKmph\": \"15\", \"WindGustMiles\": \"9\", \"windspeedKmph\": \"9\", \"windspeedMiles\": \"6\" } ], \"maxtempC\": \"21\", \"maxtempF\": \"70\", \"mintempC\": \"17\", \"mintempF\": \"62\", \"uvIndex\": \"4\" }, { \"astronomy\": [ {\"moonrise\": \"01:24 AM\", \"moonset\": \"02:28 PM\", \"sunrise\": \"07:10 AM\", \"sunset\": \"06:05 PM\" } ], \"date\": \"2015-11-05\",  \"hourly\": [ {\"chanceoffog\": \"0\", \"chanceoffrost\": \"0\", \"chanceofhightemp\": \"0\", \"chanceofovercast\": \"79\", \"chanceofrain\": \"79\", \"chanceofremdry\": \"0\", \"chanceofsnow\": \"0\", \"chanceofsunshine\": \"0\", \"chanceofthunder\": \"0\", \"chanceofwindy\": \"0\", \"cloudcover\": \"100\", \"DewPointC\": \"15\", \"DewPointF\": \"60\", \"FeelsLikeC\": \"17\", \"FeelsLikeF\": \"63\", \"HeatIndexC\": \"17\", \"HeatIndexF\": \"63\", \"humidity\": \"89\",  \"lang_zh\": [ {\"value\": \"中雨或大阵雨\" } ], \"precipMM\": \"4.2\", \"pressure\": \"1015\", \"tempC\": \"17\", \"tempF\": \"63\", \"time\": \"200\", \"visibility\": \"7\", \"weatherCode\": \"356\",  \"weatherDesc\": [ {\"value\": \"Moderate or heavy rain shower\" } ],  \"weatherIconUrl\": [ {\"value\": \"http:\\/\\/cdn.worldweatheronline.net\\/images\\/wsymbols01_png_64\\/wsymbol_0026_heavy_rain_showers_night.png\" } ], \"WindChillC\": \"17\", \"WindChillF\": \"63\", \"winddir16Point\": \"NNW\", \"winddirDegree\": \"337\", \"WindGustKmph\": \"10\", \"WindGustMiles\": \"6\", \"windspeedKmph\": \"6\", \"windspeedMiles\": \"4\" }, {\"chanceoffog\": \"0\", \"chanceoffrost\": \"0\", \"chanceofhightemp\": \"0\", \"chanceofovercast\": \"78\", \"chanceofrain\": \"78\", \"chanceofremdry\": \"0\", \"chanceofsnow\": \"0\", \"chanceofsunshine\": \"0\", \"chanceofthunder\": \"0\", \"chanceofwindy\": \"0\", \"cloudcover\": \"100\", \"DewPointC\": \"15\", \"DewPointF\": \"60\", \"FeelsLikeC\": \"17\", \"FeelsLikeF\": \"62\", \"HeatIndexC\": \"17\", \"HeatIndexF\": \"62\", \"humidity\": \"90\",  \"lang_zh\": [ {\"value\": \"小雨\" } ], \"precipMM\": \"1.0\", \"pressure\": \"1014\", \"tempC\": \"17\", \"tempF\": \"62\", \"time\": \"500\", \"visibility\": \"9\", \"weatherCode\": \"296\",  \"weatherDesc\": [ {\"value\": \"Light rain\" } ],  \"weatherIconUrl\": [ {\"value\": \"http:\\/\\/cdn.worldweatheronline.net\\/images\\/wsymbols01_png_64\\/wsymbol_0033_cloudy_with_light_rain_night.png\" } ], \"WindChillC\": \"17\", \"WindChillF\": \"62\", \"winddir16Point\": \"NNW\", \"winddirDegree\": \"345\", \"WindGustKmph\": \"3\", \"WindGustMiles\": \"2\", \"windspeedKmph\": \"2\", \"windspeedMiles\": \"1\" }, {\"chanceoffog\": \"0\", \"chanceoffrost\": \"0\", \"chanceofhightemp\": \"0\", \"chanceofovercast\": \"77\", \"chanceofrain\": \"77\", \"chanceofremdry\": \"0\", \"chanceofsnow\": \"0\", \"chanceofsunshine\": \"0\", \"chanceofthunder\": \"0\", \"chanceofwindy\": \"0\", \"cloudcover\": \"100\", \"DewPointC\": \"16\", \"DewPointF\": \"61\", \"FeelsLikeC\": \"18\", \"FeelsLikeF\": \"64\", \"HeatIndexC\": \"18\", \"HeatIndexF\": \"64\", \"humidity\": \"91\",  \"lang_zh\": [ {\"value\": \"小阵雨\" } ], \"precipMM\": \"1.7\", \"pressure\": \"1014\", \"tempC\": \"18\", \"tempF\": \"64\", \"time\": \"800\", \"visibility\": \"10\", \"weatherCode\": \"353\",  \"weatherDesc\": [ {\"value\": \"Light rain shower\" } ],  \"weatherIconUrl\": [ {\"value\": \"http:\\/\\/cdn.worldweatheronline.net\\/images\\/wsymbols01_png_64\\/wsymbol_0009_light_rain_showers.png\" } ], \"WindChillC\": \"18\", \"WindChillF\": \"64\", \"winddir16Point\": \"WNW\", \"winddirDegree\": \"291\", \"WindGustKmph\": \"0\", \"WindGustMiles\": \"0\", \"windspeedKmph\": \"0\", \"windspeedMiles\": \"0\" }, {\"chanceoffog\": \"0\", \"chanceoffrost\": \"0\", \"chanceofhightemp\": \"0\", \"chanceofovercast\": \"76\", \"chanceofrain\": \"76\", \"chanceofremdry\": \"0\", \"chanceofsnow\": \"0\", \"chanceofsunshine\": \"0\", \"chanceofthunder\": \"0\", \"chanceofwindy\": \"0\", \"cloudcover\": \"100\", \"DewPointC\": \"16\", \"DewPointF\": \"62\", \"FeelsLikeC\": \"18\", \"FeelsLikeF\": \"65\", \"HeatIndexC\": \"18\", \"HeatIndexF\": \"65\", \"humidity\": \"89\",  \"lang_zh\": [ {\"value\": \"小阵雨\" } ], \"precipMM\": \"1.2\", \"pressure\": \"1015\", \"tempC\": \"18\", \"tempF\": \"65\", \"time\": \"1100\", \"visibility\": \"10\", \"weatherCode\": \"353\",  \"weatherDesc\": [ {\"value\": \"Light rain shower\" } ],  \"weatherIconUrl\": [ {\"value\": \"http:\\/\\/cdn.worldweatheronline.net\\/images\\/wsymbols01_png_64\\/wsymbol_0009_light_rain_showers.png\" } ], \"WindChillC\": \"18\", \"WindChillF\": \"65\", \"winddir16Point\": \"NNW\", \"winddirDegree\": \"344\", \"WindGustKmph\": \"3\", \"WindGustMiles\": \"2\", \"windspeedKmph\": \"2\", \"windspeedMiles\": \"1\" }, {\"chanceoffog\": \"0\", \"chanceoffrost\": \"0\", \"chanceofhightemp\": \"0\", \"chanceofovercast\": \"10\", \"chanceofrain\": \"75\", \"chanceofremdry\": \"0\", \"chanceofsnow\": \"0\", \"chanceofsunshine\": \"0\", \"chanceofthunder\": \"0\", \"chanceofwindy\": \"0\", \"cloudcover\": \"100\", \"DewPointC\": \"17\", \"DewPointF\": \"63\", \"FeelsLikeC\": \"19\", \"FeelsLikeF\": \"66\", \"HeatIndexC\": \"19\", \"HeatIndexF\": \"66\", \"humidity\": \"89\",  \"lang_zh\": [ {\"value\": \"小阵雨\" } ], \"precipMM\": \"1.6\", \"pressure\": \"1011\", \"tempC\": \"19\", \"tempF\": \"66\", \"time\": \"1400\", \"visibility\": \"10\", \"weatherCode\": \"353\",  \"weatherDesc\": [ {\"value\": \"Light rain shower\" } ],  \"weatherIconUrl\": [ {\"value\": \"http:\\/\\/cdn.worldweatheronline.net\\/images\\/wsymbols01_png_64\\/wsymbol_0009_light_rain_showers.png\" } ], \"WindChillC\": \"19\", \"WindChillF\": \"66\", \"winddir16Point\": \"N\", \"winddirDegree\": \"9\", \"WindGustKmph\": \"7\", \"WindGustMiles\": \"4\", \"windspeedKmph\": \"5\", \"windspeedMiles\": \"3\" }, {\"chanceoffog\": \"0\", \"chanceoffrost\": \"0\", \"chanceofhightemp\": \"0\", \"chanceofovercast\": \"66\", \"chanceofrain\": \"74\", \"chanceofremdry\": \"0\", \"chanceofsnow\": \"0\", \"chanceofsunshine\": \"0\", \"chanceofthunder\": \"0\", \"chanceofwindy\": \"0\", \"cloudcover\": \"100\", \"DewPointC\": \"16\", \"DewPointF\": \"62\", \"FeelsLikeC\": \"19\", \"FeelsLikeF\": \"67\", \"HeatIndexC\": \"19\", \"HeatIndexF\": \"67\", \"humidity\": \"84\",  \"lang_zh\": [ {\"value\": \"小阵雨\" } ], \"precipMM\": \"1.8\", \"pressure\": \"1009\", \"tempC\": \"19\", \"tempF\": \"67\", \"time\": \"1700\", \"visibility\": \"10\", \"weatherCode\": \"353\",  \"weatherDesc\": [ {\"value\": \"Light rain shower\" } ],  \"weatherIconUrl\": [ {\"value\": \"http:\\/\\/cdn.worldweatheronline.net\\/images\\/wsymbols01_png_64\\/wsymbol_0009_light_rain_showers.png\" } ], \"WindChillC\": \"19\", \"WindChillF\": \"67\", \"winddir16Point\": \"NE\", \"winddirDegree\": \"37\", \"WindGustKmph\": \"16\", \"WindGustMiles\": \"10\", \"windspeedKmph\": \"11\", \"windspeedMiles\": \"7\" }, {\"chanceoffog\": \"0\", \"chanceoffrost\": \"0\", \"chanceofhightemp\": \"0\", \"chanceofovercast\": \"20\", \"chanceofrain\": \"73\", \"chanceofremdry\": \"0\", \"chanceofsnow\": \"0\", \"chanceofsunshine\": \"0\", \"chanceofthunder\": \"0\", \"chanceofwindy\": \"0\", \"cloudcover\": \"100\", \"DewPointC\": \"16\", \"DewPointF\": \"61\", \"FeelsLikeC\": \"18\", \"FeelsLikeF\": \"64\", \"HeatIndexC\": \"18\", \"HeatIndexF\": \"64\", \"humidity\": \"91\",  \"lang_zh\": [ {\"value\": \"小阵雨\" } ], \"precipMM\": \"2.1\", \"pressure\": \"1011\", \"tempC\": \"18\", \"tempF\": \"64\", \"time\": \"2000\", \"visibility\": \"10\", \"weatherCode\": \"353\",  \"weatherDesc\": [ {\"value\": \"Light rain shower\" } ],  \"weatherIconUrl\": [ {\"value\": \"http:\\/\\/cdn.worldweatheronline.net\\/images\\/wsymbols01_png_64\\/wsymbol_0025_light_rain_showers_night.png\" } ], \"WindChillC\": \"18\", \"WindChillF\": \"64\", \"winddir16Point\": \"NNE\", \"winddirDegree\": \"26\", \"WindGustKmph\": \"14\", \"WindGustMiles\": \"9\", \"windspeedKmph\": \"9\", \"windspeedMiles\": \"6\" }, {\"chanceoffog\": \"0\", \"chanceoffrost\": \"0\", \"chanceofhightemp\": \"0\", \"chanceofovercast\": \"72\", \"chanceofrain\": \"72\", \"chanceofremdry\": \"0\", \"chanceofsnow\": \"0\", \"chanceofsunshine\": \"0\", \"chanceofthunder\": \"0\", \"chanceofwindy\": \"0\", \"cloudcover\": \"100\", \"DewPointC\": \"16\", \"DewPointF\": \"61\", \"FeelsLikeC\": \"18\", \"FeelsLikeF\": \"64\", \"HeatIndexC\": \"18\", \"HeatIndexF\": \"64\", \"humidity\": \"93\",  \"lang_zh\": [ {\"value\": \"中雨或大阵雨\" } ], \"precipMM\": \"3.6\", \"pressure\": \"1012\", \"tempC\": \"18\", \"tempF\": \"64\", \"time\": \"2300\", \"visibility\": \"7\", \"weatherCode\": \"356\",  \"weatherDesc\": [ {\"value\": \"Moderate or heavy rain shower\" } ],  \"weatherIconUrl\": [ {\"value\": \"http:\\/\\/cdn.worldweatheronline.net\\/images\\/wsymbols01_png_64\\/wsymbol_0026_heavy_rain_showers_night.png\" } ], \"WindChillC\": \"18\", \"WindChillF\": \"64\", \"winddir16Point\": \"N\", \"winddirDegree\": \"7\", \"WindGustKmph\": \"9\", \"WindGustMiles\": \"6\", \"windspeedKmph\": \"6\", \"windspeedMiles\": \"4\" } ], \"maxtempC\": \"19\", \"maxtempF\": \"67\", \"mintempC\": \"18\", \"mintempF\": \"64\", \"uvIndex\": \"2\" }, { \"astronomy\": [ {\"moonrise\": \"02:15 AM\", \"moonset\": \"03:03 PM\", \"sunrise\": \"07:10 AM\", \"sunset\": \"06:04 PM\" } ], \"date\": \"2015-11-06\",  \"hourly\": [ {\"chanceoffog\": \"0\", \"chanceoffrost\": \"0\", \"chanceofhightemp\": \"0\", \"chanceofovercast\": \"71\", \"chanceofrain\": \"71\", \"chanceofremdry\": \"0\", \"chanceofsnow\": \"0\", \"chanceofsunshine\": \"0\", \"chanceofthunder\": \"0\", \"chanceofwindy\": \"0\", \"cloudcover\": \"100\", \"DewPointC\": \"17\", \"DewPointF\": \"63\", \"FeelsLikeC\": \"18\", \"FeelsLikeF\": \"65\", \"HeatIndexC\": \"18\", \"HeatIndexF\": \"65\", \"humidity\": \"93\",  \"lang_zh\": [ {\"value\": \"小雨\" } ], \"precipMM\": \"1.8\", \"pressure\": \"1011\", \"tempC\": \"18\", \"tempF\": \"65\", \"time\": \"200\", \"visibility\": \"9\", \"weatherCode\": \"296\",  \"weatherDesc\": [ {\"value\": \"Light rain\" } ],  \"weatherIconUrl\": [ {\"value\": \"http:\\/\\/cdn.worldweatheronline.net\\/images\\/wsymbols01_png_64\\/wsymbol_0033_cloudy_with_light_rain_night.png\" } ], \"WindChillC\": \"18\", \"WindChillF\": \"65\", \"winddir16Point\": \"NW\", \"winddirDegree\": \"319\", \"WindGustKmph\": \"5\", \"WindGustMiles\": \"3\", \"windspeedKmph\": \"4\", \"windspeedMiles\": \"2\" }, {\"chanceoffog\": \"0\", \"chanceoffrost\": \"0\", \"chanceofhightemp\": \"0\", \"chanceofovercast\": \"70\", \"chanceofrain\": \"70\", \"chanceofremdry\": \"0\", \"chanceofsnow\": \"0\", \"chanceofsunshine\": \"0\", \"chanceofthunder\": \"0\", \"chanceofwindy\": \"0\", \"cloudcover\": \"100\", \"DewPointC\": \"16\", \"DewPointF\": \"61\", \"FeelsLikeC\": \"18\", \"FeelsLikeF\": \"64\", \"HeatIndexC\": \"18\", \"HeatIndexF\": \"64\", \"humidity\": \"93\",  \"lang_zh\": [ {\"value\": \"周边有零星小雨\" } ], \"precipMM\": \"0.1\", \"pressure\": \"1010\", \"tempC\": \"18\", \"tempF\": \"64\", \"time\": \"500\", \"visibility\": \"10\", \"weatherCode\": \"176\",  \"weatherDesc\": [ {\"value\": \"Patchy rain nearby\" } ],  \"weatherIconUrl\": [ {\"value\": \"http:\\/\\/cdn.worldweatheronline.net\\/images\\/wsymbols01_png_64\\/wsymbol_0025_light_rain_showers_night.png\" } ], \"WindChillC\": \"18\", \"WindChillF\": \"64\", \"winddir16Point\": \"WNW\", \"winddirDegree\": \"286\", \"WindGustKmph\": \"1\", \"WindGustMiles\": \"1\", \"windspeedKmph\": \"1\", \"windspeedMiles\": \"1\" }, {\"chanceoffog\": \"0\", \"chanceoffrost\": \"0\", \"chanceofhightemp\": \"0\", \"chanceofovercast\": \"69\", \"chanceofrain\": \"5\", \"chanceofremdry\": \"0\", \"chanceofsnow\": \"0\", \"chanceofsunshine\": \"0\", \"chanceofthunder\": \"0\", \"chanceofwindy\": \"0\", \"cloudcover\": \"100\", \"DewPointC\": \"18\", \"DewPointF\": \"64\", \"FeelsLikeC\": \"19\", \"FeelsLikeF\": \"66\", \"HeatIndexC\": \"19\", \"HeatIndexF\": \"66\", \"humidity\": \"92\",  \"lang_zh\": [ {\"value\": \"阴天\" } ], \"precipMM\": \"0.1\", \"pressure\": \"1012\", \"tempC\": \"19\", \"tempF\": \"66\", \"time\": \"800\", \"visibility\": \"10\", \"weatherCode\": \"122\",  \"weatherDesc\": [ {\"value\": \"Overcast\" } ],  \"weatherIconUrl\": [ {\"value\": \"http:\\/\\/cdn.worldweatheronline.net\\/images\\/wsymbols01_png_64\\/wsymbol_0004_black_low_cloud.png\" } ], \"WindChillC\": \"19\", \"WindChillF\": \"66\", \"winddir16Point\": \"W\", \"winddirDegree\": \"262\", \"WindGustKmph\": \"3\", \"WindGustMiles\": \"2\", \"windspeedKmph\": \"3\", \"windspeedMiles\": \"2\" }, {\"chanceoffog\": \"0\", \"chanceoffrost\": \"0\", \"chanceofhightemp\": \"0\", \"chanceofovercast\": \"68\", \"chanceofrain\": \"16\", \"chanceofremdry\": \"0\", \"chanceofsnow\": \"0\", \"chanceofsunshine\": \"0\", \"chanceofthunder\": \"0\", \"chanceofwindy\": \"0\", \"cloudcover\": \"100\", \"DewPointC\": \"18\", \"DewPointF\": \"64\", \"FeelsLikeC\": \"21\", \"FeelsLikeF\": \"69\", \"HeatIndexC\": \"21\", \"HeatIndexF\": \"69\", \"humidity\": \"83\",  \"lang_zh\": [ {\"value\": \"阴天\" } ], \"precipMM\": \"0.0\", \"pressure\": \"1013\", \"tempC\": \"21\", \"tempF\": \"69\", \"time\": \"1100\", \"visibility\": \"10\", \"weatherCode\": \"122\",  \"weatherDesc\": [ {\"value\": \"Overcast\" } ],  \"weatherIconUrl\": [ {\"value\": \"http:\\/\\/cdn.worldweatheronline.net\\/images\\/wsymbols01_png_64\\/wsymbol_0004_black_low_cloud.png\" } ], \"WindChillC\": \"21\", \"WindChillF\": \"69\", \"winddir16Point\": \"WNW\", \"winddirDegree\": \"288\", \"WindGustKmph\": \"3\", \"WindGustMiles\": \"2\", \"windspeedKmph\": \"3\", \"windspeedMiles\": \"2\" }, {\"chanceoffog\": \"0\", \"chanceoffrost\": \"0\", \"chanceofhightemp\": \"0\", \"chanceofovercast\": \"1\", \"chanceofrain\": \"0\", \"chanceofremdry\": \"0\", \"chanceofsnow\": \"0\", \"chanceofsunshine\": \"0\", \"chanceofthunder\": \"0\", \"chanceofwindy\": \"0\", \"cloudcover\": \"97\", \"DewPointC\": \"18\", \"DewPointF\": \"64\", \"FeelsLikeC\": \"25\", \"FeelsLikeF\": \"76\", \"HeatIndexC\": \"25\", \"HeatIndexF\": \"76\", \"humidity\": \"76\",  \"lang_zh\": [ {\"value\": \"阴天\" } ], \"precipMM\": \"0.1\", \"pressure\": \"1010\", \"tempC\": \"22\", \"tempF\": \"72\", \"time\": \"1400\", \"visibility\": \"10\", \"weatherCode\": \"122\",  \"weatherDesc\": [ {\"value\": \"Overcast\" } ],  \"weatherIconUrl\": [ {\"value\": \"http:\\/\\/cdn.worldweatheronline.net\\/images\\/wsymbols01_png_64\\/wsymbol_0004_black_low_cloud.png\" } ], \"WindChillC\": \"22\", \"WindChillF\": \"72\", \"winddir16Point\": \"NNE\", \"winddirDegree\": \"25\", \"WindGustKmph\": \"4\", \"WindGustMiles\": \"2\", \"windspeedKmph\": \"3\", \"windspeedMiles\": \"2\" }, {\"chanceoffog\": \"0\", \"chanceoffrost\": \"0\", \"chanceofhightemp\": \"0\", \"chanceofovercast\": \"0\", \"chanceofrain\": \"0\", \"chanceofremdry\": \"0\", \"chanceofsnow\": \"0\", \"chanceofsunshine\": \"1\", \"chanceofthunder\": \"0\", \"chanceofwindy\": \"0\", \"cloudcover\": \"79\", \"DewPointC\": \"16\", \"DewPointF\": \"61\", \"FeelsLikeC\": \"22\", \"FeelsLikeF\": \"71\", \"HeatIndexC\": \"25\", \"HeatIndexF\": \"76\", \"humidity\": \"72\",  \"lang_zh\": [ {\"value\": \"多云\" } ], \"precipMM\": \"0.0\", \"pressure\": \"1010\", \"tempC\": \"22\", \"tempF\": \"71\", \"time\": \"1700\", \"visibility\": \"10\", \"weatherCode\": \"119\",  \"weatherDesc\": [ {\"value\": \"Cloudy\" } ],  \"weatherIconUrl\": [ {\"value\": \"http:\\/\\/cdn.worldweatheronline.net\\/images\\/wsymbols01_png_64\\/wsymbol_0003_white_cloud.png\" } ], \"WindChillC\": \"22\", \"WindChillF\": \"71\", \"winddir16Point\": \"NE\", \"winddirDegree\": \"55\", \"WindGustKmph\": \"9\", \"WindGustMiles\": \"6\", \"windspeedKmph\": \"8\", \"windspeedMiles\": \"5\" }, {\"chanceoffog\": \"0\", \"chanceoffrost\": \"0\", \"chanceofhightemp\": \"0\", \"chanceofovercast\": \"0\", \"chanceofrain\": \"0\", \"chanceofremdry\": \"0\", \"chanceofsnow\": \"0\", \"chanceofsunshine\": \"64\", \"chanceofthunder\": \"0\", \"chanceofwindy\": \"0\", \"cloudcover\": \"26\", \"DewPointC\": \"17\", \"DewPointF\": \"63\", \"FeelsLikeC\": \"20\", \"FeelsLikeF\": \"68\", \"HeatIndexC\": \"20\", \"HeatIndexF\": \"68\", \"humidity\": \"85\",  \"lang_zh\": [ {\"value\": \"局部多云\" } ], \"precipMM\": \"0.0\", \"pressure\": \"1012\", \"tempC\": \"20\", \"tempF\": \"68\", \"time\": \"2000\", \"visibility\": \"10\", \"weatherCode\": \"116\",  \"weatherDesc\": [ {\"value\": \"Partly Cloudy\" } ],  \"weatherIconUrl\": [ {\"value\": \"http:\\/\\/cdn.worldweatheronline.net\\/images\\/wsymbols01_png_64\\/wsymbol_0004_black_low_cloud.png\" } ], \"WindChillC\": \"20\", \"WindChillF\": \"68\", \"winddir16Point\": \"ENE\", \"winddirDegree\": \"61\", \"WindGustKmph\": \"10\", \"WindGustMiles\": \"6\", \"windspeedKmph\": \"9\", \"windspeedMiles\": \"5\" }, {\"chanceoffog\": \"0\", \"chanceoffrost\": \"0\", \"chanceofhightemp\": \"0\", \"chanceofovercast\": \"32\", \"chanceofrain\": \"46\", \"chanceofremdry\": \"0\", \"chanceofsnow\": \"0\", \"chanceofsunshine\": \"0\", \"chanceofthunder\": \"0\", \"chanceofwindy\": \"0\", \"cloudcover\": \"53\", \"DewPointC\": \"17\", \"DewPointF\": \"63\", \"FeelsLikeC\": \"19\", \"FeelsLikeF\": \"66\", \"HeatIndexC\": \"19\", \"HeatIndexF\": \"66\", \"humidity\": \"90\",  \"lang_zh\": [ {\"value\": \"周边有零星小雨\" } ], \"precipMM\": \"0.1\", \"pressure\": \"1014\", \"tempC\": \"19\", \"tempF\": \"66\", \"time\": \"2300\", \"visibility\": \"10\", \"weatherCode\": \"176\",  \"weatherDesc\": [ {\"value\": \"Patchy rain nearby\" } ],  \"weatherIconUrl\": [ {\"value\": \"http:\\/\\/cdn.worldweatheronline.net\\/images\\/wsymbols01_png_64\\/wsymbol_0025_light_rain_showers_night.png\" } ], \"WindChillC\": \"19\", \"WindChillF\": \"66\", \"winddir16Point\": \"NNE\", \"winddirDegree\": \"29\", \"WindGustKmph\": \"10\", \"WindGustMiles\": \"6\", \"windspeedKmph\": \"8\", \"windspeedMiles\": \"5\" } ], \"maxtempC\": \"22\", \"maxtempF\": \"72\", \"mintempC\": \"18\", \"mintempF\": \"65\", \"uvIndex\": \"3\" } ] }}";

    String APIurl = "http://api.worldweatheronline.com/free/v2/weather.ashx?key=55f1fdd05fba23be0a18043d0a017&q=tokyo&nu%20m_of_days=3&format=json&lang=zh";

    class myThread extends Thread {
        httpHandler http = null;
        TextView todayTemp;
        TextView todayStatus;
        ImageView imView;

        myThread(httpHandler http, TextView textView1, TextView textView2, ImageView imView) {
            this.http = http;
            this.todayTemp = textView1;
            this.todayStatus = textView2;
            this.imView = imView;
        }

        public void run() {
            // true process
            String s = http.get(APIurl);

            // fake process
            /*
            String s = rawJsonData;
            try {
                sleep(1000 * 5);
            }
            catch (InterruptedException e) {
                e.printStackTrace();
            }
            */
            final String temp_C;
            final String weatherDesc;
            final String iconURL;
            try {
                // final JSONObject json = new JSONObject(new JSONTokener(s));
                WeatherParser we = new WeatherParser(s);
                temp_C = we.getCurTemp_C();
                weatherDesc = we.getCurWeatherDesc();
                iconURL = we.getCurWeatherIconUrl();
                bmImg  = WeatherUtils.returnBitMap(iconURL);
                Log.i("http", "Current temperature: " + temp_C);
                Log.i("http", "Current condition: " + weatherDesc);
                Log.i("http", "Current weather icon URL: " + iconURL);

                runOnUiThread(
                        new Runnable() {
                            @Override
                            public void run() {
                                todayTemp.setText("Current temperature: " + temp_C);
                                todayStatus.setText("Current status: " + weatherDesc);
                                imView.setImageBitmap(bmImg);
                            }
                        }
                );
            } catch (JSONException e) {
                e.printStackTrace();
            }
        }
    }

    Runnable urlRun = new Runnable(){
        @Override
        public void run() {

            Looper.prepare();

            // TEST
            Map<String,Object> cityMap = new HashMap();

            try {
                InputStream inputStream = WeatherUtils.getXML("http://115.29.192.240/language.xml");
                cityMap = PullXMLTools.parseXML(inputStream, "UTF-8", WeatherUtils.getLanguge());
            } catch (Exception e) {
                e.printStackTrace();
            }
            Log.i("xml", "city: " + cityMap.get("city"));

            Looper.loop();
        }
    };

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.menu_main, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // Handle action bar item clicks here. The action bar will
        // automatically handle clicks on the Home/Up button, so long
        // as you specify a parent activity in AndroidManifest.xml.
        int id = item.getItemId();

        //noinspection SimplifiableIfStatement
        if (id == R.id.action_settings) {
            return true;
        }

        return super.onOptionsItemSelected(item);
    }
}